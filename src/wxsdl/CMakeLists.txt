IF (COMPILE_DEVICE_LIBRARY)
  PREPARE_DEVICE(wxsdl TYPE WxsdlWriter INCLUDE WxsdlWriter.h)
ENDIF (COMPILE_DEVICE_LIBRARY)

IF (NOT SKIP_wxsdl)

  # make a stand-alone test executable

  FIND_PACKAGE(YARP)
  FIND_PACKAGE(wxWidgets)
  FIND_PACKAGE(SDL)
 
  IF (YARP_FOUND AND wxWidgets_FOUND AND SDL_FOUND)

  INCLUDE_DIRECTORIES(${wxWidgets_INCLUDE_DIRS})
  ADD_DEFINITIONS(${wxWidgets_DEFINITIONS})
  LINK_LIBRARIES(${wxWidgets_LIBRARIES})

  INCLUDE_DIRECTORIES(${SDL_INCLUDE_DIR})
  LINK_LIBRARIES(${SDL_LIBRARY})
  IF (WIN32)
     LINK_LIBRARIES(winmm)
  ENDIF (WIN32)

  ADD_LIBRARY(wxsdl WxsdlWriter.cpp  WxsdlWriter.h)

  IF (NOT COMPILE_DEVICE_LIBRARY)
    ADD_DEFINITIONS(-DWXSDL_MAIN)
    ADD_EXECUTABLE(wxsdl_test  WxsdlWriter.cpp  WxsdlWriter.h)
  ENDIF (NOT COMPILE_DEVICE_LIBRARY)

  ELSE (YARP_FOUND AND wxWidgets_FOUND AND SDL_FOUND)

  MESSAGE(FATAL_ERROR "Cannot find all dependencies for wxsdl device")

  ENDIF (YARP_FOUND AND wxWidgets_FOUND AND SDL_FOUND)

ENDIF(NOT SKIP_wxsdl)
